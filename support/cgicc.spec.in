## -*-sh-*-
## $Id: cgicc.spec.in,v 1.3 2000/07/03 03:21:09 sbooth Exp $

## Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
## This file is free software; the Free Software Foundation
## gives unlimited permission to copy and/or distribute it,
## with or without modifications, as long as this notice is preserved.

## This program is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY, to the extent permitted by law; without
## even the implied warranty of MERCHANTABILITY or FITNESS FOR A
## PARTICULAR PURPOSE.

## Macros defined by autoconf
%define name @PACKAGE@
%define version @VERSION@
%define release @RPM_RELEASE@
$%define prefix /usr

%define lt_release @LT_RELEASE@
%define lt_version @LT_CURRENT@.@LT_REVISION@.@LT_AGE@

Name: %{name}
Version: %{version}
Release: %{release}

BuildRoot: /tmp/%{name}-root
#Prefix: %{prefix}

Copyright: GPL
Group: Development/Libraries
Source: ftp://ftp.gnu.org:/gnu/software/cgicc/%{name}-%{version}.tar.gz
URL: http://www.lmi.net/~sbooth/cgicc/
Vendor: Stephen F. Booth
Summary: A C++ class library for developing CGI applications

%description
GNU Cgicc is an ANSI C++ compliant class library that greatly
simplifies the creation of CGI applications for the World Wide
Web. Cgicc performs the following functions:

 - Parses both GET and POST form data transparently. 
 - Provides string, integer, floating-point and single- and
   multiple-choice retrieval methods for form data.
 - Provides methods for saving and restoring CGI environments to aid
   in application debugging.
 - Provides full on-the-fly HTML 4.0 generation capabilities, with support
   for cookies.
 - Supports HTTP file upload. 

%changelog

%prep
%setup

%build
%GNUconfigure
make

%install
if [ "$RPM_BUILD_ROOT" != "/tmp/%{name}-root" ]; then
    echo "RPM_BUILD_ROOT didn't match expected; won't be cleaned"
else
    echo "Cleaning RPM_BUILD_ROOT: $RPM_BUILD_ROOT"
    rm -rf "$RPM_BUILD_ROOT"
fi
make DESTDIR="$RPM_BUILD_ROOT" install

%clean
if [ "$RPM_BUILD_ROOT" != "/tmp/%{name}-root" ]; then
    echo "RPM_BUILD_ROOT didn't match expected; won't be cleaned"
else
    echo "Cleaning RPM_BUILD_ROOT: $RPM_BUILD_ROOT"
    rm -rf "$RPM_BUILD_ROOT"
fi

#%post
#/sbin/ldconfig

#%postun
#/sbin/ldconfig

%files

## Documenation
%doc README AUTHORS COPYING NEWS ChangeLog THANKS
#%{_prefix}/doc/%{name}-%{version}/INSTALL 
#%{_prefix}/doc/%{name}-%{version}/README 
#%{_prefix}/doc/%{name}-%{version}/AUTHORS
#%{_prefix}/doc/%{name}-%{version}/COPYING
#%{_prefix}/doc/%{name}-%{version}/NEWS
#%{_prefix}/doc/%{name}-%{version}/ChangeLog
#%{_prefix}/doc/%{name}-%{version}/THANKS

## Info files
%{_prefix}/info/cgicc.info
%{_prefix}/info/cgicc.info-1
%{_prefix}/info/cgicc.info-2

## Header files
%{_prefix}/include/cgicc/CgiDefs.h
%{_prefix}/include/cgicc/CgiEnvironment.h
%{_prefix}/include/cgicc/CgiUtils.h
%{_prefix}/include/cgicc/Cgicc.h
%{_prefix}/include/cgicc/FormEntry.h
%{_prefix}/include/cgicc/FormFile.h
%{_prefix}/include/cgicc/HTMLAttributes.h
%{_prefix}/include/cgicc/HTMLClasses.h
%{_prefix}/include/cgicc/HTMLElements.h
%{_prefix}/include/cgicc/HTMLGeneric.h
%{_prefix}/include/cgicc/HTTPHeaders.h
%{_prefix}/include/cgicc/MStreamable.h

## Library files
%{_prefix}/lib/libcgicc.a
%{_prefix}/lib/libcgicc.la
%{_prefix}/lib/libcgicc.so
%{_prefix}/lib/libcgicc.so.1
%{_prefix}/lib/libcgicc.so.1.1.1

%clean
rm -rf $RPM_BUILD_DIR/%{name}-%{version}
